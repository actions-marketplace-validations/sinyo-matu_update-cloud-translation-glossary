# Update cloud translation glossary

## What is this

This action just call some [cloud translation APIs](https://cloud.google.com/translate/docs) to update translation [glossary resource](https://cloud.google.com/translate/docs/advanced/glossary)

## Inputs

|     identifier     | required |                                                                                                              description                                                                                                              |
| :----------------: | :------: | :-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
|    access-token    |  `true`  |                                                                                         access token generated by google-github-actions/auth                                                                                          |
|    bucket-name     |  `true`  |                                                                                    name of google cloud storage bucket where glossary file existed                                                                                    |
|   glossary-name    |  `true`  |                                                                                                       name of glossary resource                                                                                                       |
| glossary-file-name |  `true`  |                                                                                                         name of glossary file                                                                                                         |
|     project-id     |  `true`  |                                                                                       project id of your google cloud translation API activated                                                                                       |
|  source-language   | `false`  |                                                                            if your the glossary file is one pair, please set this input as a language code                                                                            |
|  target-language   | `false`  |                                                                              if your glossary file is one pair, please set this input as a language code                                                                              |
| language-codes-set | `false`  |                                                                  if your glossary file is multi-language sets, set this as comma separated string of language codes                                                                   |
|     wait-time      | `false`  | create glossary source is a long-time operation, this will set a wait time before checking if the create operation is end. this is default to 0 sec, max to 300 secs. by default(0 sec), checking will usually return a RUNNING state |

## Usage Sample

```yml
jobs:
  upload_and_update:
    runs-on: ubuntu-latest
    permissions:
      contents: "read"
      id-token: "write"
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: 'auth'
        id: 'auth'
        name: 'Authenticate to Google Cloud'
        uses: 'google-github-actions/auth@v0'
        with:
          token_format: 'access_token'
          credentials_json: '${{ secrets.GOOGLE_CREDENTIALS }}'

      - name: 'upload-file'
        uses: 'google-github-actions/upload-cloud-storage@v0'
        with:
          gzip: false
          path: './file'
          destination: 'my-bucket'

      - name: 'update'
        uses: 'sinyo-matu/update-google-translation-glossary'
        with:
          access-token: ${{ steps.auth.outputs.access_token}}
          bucket-name: "my-bucket"
          glossary-name: "my-glossary"
          glossary-file-name: "file"
          project-id: "my-translation-project"
          source-language: "ja"
          target-language: "en"
          wait-time: "5"
          # language-codes-set: "en,ja,de,zh,fr,ru"
```

## Note

if you are using [upload-cloud-storage](https://github.com/marketplace/actions/cloud-storage-uploader), please set `gzip: false`. otherwise the glossary csv file format may be broken.
